FROM quay.io/centos-bootc/centos-bootc:stream9

# Copy locally built services rpm
COPY /bin/rpm/flightctl-services-*.rpm /tmp/

# Install the locally built rpm
RUN dnf -y localinstall /tmp/flightctl-services-*.rpm && \
    rm -rf /tmp/*

# Install cloud-init
RUN dnf -y install cloud-init && \
    dnf -y clean all

# Enable services to start at boot
RUN systemctl enable flightctl.target cloud-init

RUN bootc container lint
